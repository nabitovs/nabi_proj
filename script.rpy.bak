screen nickname_list(nicknames):
    vbox:
        text "Saved Nicknames:"
        for name in nicknames:
            text name
        if not nicknames:
            text "No nicknames found!"


label start:
    $ player_name = renpy.input("Во-первых, как тебя зовут?", default="").strip()

    # If no name is entered, use a default name
    if player_name == "":
        $ player_name = "челик"

    # Save the player's name to the database
    $ save_player_to_database(player_name)

    "Ваше имя было сохранено!"
    menu:
        "Показать сохраненные никнеймы":
            call show_nicknames
        "Продолжить игру":
            jump intro

label show_nicknames:
    $ nicknames = fetch_saved_nicknames()
    call screen nickname_list(nicknames)
    jump intro

label intro:
    scene bg campus
    play music "audio/everyday playful cute piano.mp3" fadein 1.0 volume 0.5
    image nagisa = im.FactorScale("nagisa.png", 0.7)
    image nagisa happy = im.FactorScale("nagisa happy.png", 0.7)
    image nagisa curious = im.FactorScale("nagisa curious.png", 0.7)
    image nagisa blushing = im.FactorScale("nagisa blushing.png", 0.7)
    image nagisa mad = im.FactorScale("nagisa mad.png", 0.7)
    image nagisa unserious = im.FactorScale("nagisa unserious.png", 0.7)
    define e = Character("Nagisa", image="nagisa.png")
    "Сегодня мой первый учебный день в университете..."
    "Я пришел на свою первую пару. Пока что никого здесь не знаю."
    "Ладно, посижу в телефоне, все равно я боюсь подходить и знакомиться. Делать первые шаги это не мое."
    "Через несколько минут я вижу парня(?), который подходит ко всем и начинает разговор."
    "Неужели он придет и ко мне?"
    show nagisa with dissolve
    "???" "-Привет! Ты же ведь из Северо-Каменных мест?"
    "???" "-Извини, случайно подслушал твой разговор."
    "-Привет, нет, тебе послышалось, я из Степно-Каменных мест."
    show nagisa happy
    e "-Ой, извини, хаха! Я тоже приехал из другого города. Меня зовут Нагиса, а как тебя?"
    "-Я [player_name]"
    show nagisa
    e "-Приятно познакомиться! Ну что же, надеюсь мы подружимся."
    hide nagisa with dissolve
    "Так я познакомился с Нагисой. Он мой одногрупник, и довольно общительный на первый взгляд"
    "Он был очень добрым и жизнерадостным, мне нравилось находится с ним вместе."
    "Он всегда старается внимательно выслушивать меня, и мне нравится это в нем."
    "Кроме этого, ничего необычного не происходило."
    "Весь оставшийся день в университете прошел как обычно."
    "Надеюсь, жизнь в университете будет легкой, и мне не нужно будет стараться."
    "Если честно, пока что не вижу смысла стараться."
    scene bg park
    stop music
    play music "audio/walkin in the park.mp3" fadein 1.0 volume 0.5
    "…На улице, в парке с водоемом…"
    "Я вышел на улице после учебы. Погода на улице прекрасна: теплый освежающий осенний бриз, неназойливое солнце, и тепло."
    "Хм, этот парень еще раз подошел ко мне?"
    show nagisa happy with dissolve
    e "-Эй [player_name], привет еще раз! Не хочешь прогуляться?"
    "-Прогуляться?"
    e "-Ну, я впервые в этом городе, так что очень хотелось бы погулять, хотя бы недалеко от университета."
    "-Я тоже давно хотел погулять в новом городе. Если хочешь, то я думаю что это не проблема."
    "-А ты сам куда хочешь пойти?"
    show nagisa curious
    e "-Хммм..."
    show nagisa mad
    e "-Хммммммммм ыааахх..."
    e "-Уыыыыыыыыыыыы..."
    show nagisa curious
    e "- Например... давай сходим в парк? Там есть водоем."
    "-...Хорошо."
    show nagisa
    e "-Давай узнавать друг друга получше!"
    e "-Чем ты увлекаешься, [player_name]?"
    "- Ничем таким, о чем можно поговорить."
    show nagisa curious
    e "- Да ладно?! Неужели нет ничего, что тебя интересует?"
    "- Наверное только аниме, и все что с ним связано."
    show nagisa happy
    e "- Круто! Я люблю аниме, меня звали анимешником в период карантина! Я обожаю аниме!"
    "Да, сейчас каждый увлекается аниме культурой, это неудивительно."
    hide nagisa happy with dissolve
    "Но то, как он обращает внимание на каждую деталь моих слов…"
    "Очень сложно найти людей, которым не все равно на мою болтовню. Мне определенно нравится такое общение."
    "Мы обсудили с ним все, что связано с аниме. Я рассказал ему, сколько аниме я просмотрел и мои предпочтения в них."
    "-Но на улице стало жарко… Начало осени всегда было таким жарким?"
    "- Еще и мой рюкзак. Он тяжелый из-за ноутбука внутри."
    show nagisa curious with dissolve
    e "- Тебе тяжело ходить из-за рюкзака?"
    "Ой. Я что сказал это вслух?"
    "- Да, а также моя спина потеет из-за него."
    show nagisa happy:
        zoom 1.1
    e "- Хочешь я понесу твою сумку)?"
    "Это было довольно странным с его стороны. Как бы сказать... Я парень, и он тоже."
    "Но, наверное, он просто очень дружелюбный, да и мне будет так НАМНОГО легче."
    show nagisa curious
    "- Я это просто так сказал, не беспокойся… Я не сказал это для того чтобы ты его понес."
    show nagisa happy
    e "- Но я настаиваю! Я одет не так тепло как ты и не сильно не потею!"
    show nagisa
    "-Ну тогда, эм... Как хочешь."
    "Я снял рюкзак и отдал его ему."
    "Он надел мой рюкзак спереди."
    show nagisa unserious:
        zoom 1
    e "- Ха! Теперь я будто беременный. Беременный от тебя!"
    "- Не говори так… Это звучит совсем не очень."
    show nagisa happy
    "-Хаха, да я же шучу!"
    "Интересный парень… С более интересным юмором."
    hide nagisa happy with dissolve
    "Так мы погуляли у водоема."
    "Было весело, и думаю ему тоже."
    "Мы разошлись, и я сел в автобус, чтобы добраться до дома."
    scene bg house
    play music "audio/vntrack13.mp3" fadein 1.0 volume 0.3
    "…Дом…"
    "Блин! Я проспал пары которые должны были быть ранним утром! Надо написать ему..."
    "…Телефонная переписка…"
    "- Я проспал ☹"
    e "-Блин, успеешь приехать?"
    "- Нет смысла, пока я доеду, пара уже закончится."
    e "-Хорошо, в следующий раз постарайся просыпаться вовремя!"
    "...Через несколько часов…"
    e "*Сообщение от Нагисы* - Можно к тебе приехать?"
    "Хм, он довольно хороший человек, учитывая эти несколько недель что мы были знакомы."
    " К тому же, было бы хорошо если кто-то помог мне сделать задания по университету."
    "Но зачем ему понадобилось приходить?"
    "Ладно, пусть приходит, почему бы и нет?"
    "- Хорошо, приезжай. Как раз поможешь мне с презентацией. Сейчас скину адрес."
    e "-Вау, не ожидал что ты согласишься! Спасибо! Уже еду :3"
    "Нагиса приехал в мой дом через 40 минут."
    stop music
    play sound "knock.mp3"
    "Слышится стук в дверь. Похоже, он уже здесь."
    show nagisa happy with dissolve
    stop sound
    play music "audio/vntrack21.mp3" fadein 1.0 volume 0.5
    e "-Привет привет!"
    show nagisa curious
    e "-Вау, какой у тебя красивый дом! Какой ремонт! Просто прекрасно!"
    e "-У тебя такая красивая квартира! Я даже представить не мог, что ты живешь в таком доме!"
    "-Я здесь живу на время учебы. Это не мой собственный дом."
    show nagisa mad
    e "-Какая разница? Просто жить в таком доме одному это просто мечта!"
    "Он реагирует слишком эмоционально на такие ординарные вещи."
    show nagisa
    "-Ну, можешь пройти в зал и присаживаться на диване."
    hide nagisa mad with dissolve
    "Нагиса прошел в зал следуя тому, что сказал [player_name], и достал свой ноутбук, для того чтобы начать работу над учебным заданием."
    "Он старался вести себя тихо и прилежно. Видимо он польщен тем, что его пригласили в гости."
    "Вскоре я присоединился к нему, и мы вместе начали делать презентацию."
    "Я отвлекаюсь и мне трудно держать фокус на одном, поэтому обычно я делаю все, кроме учебы."
    "Поэтому иметь друга как он, мне просто необходимо."
    "Нагиса очень старательный, и вкладывает всю душу на то, что ему нужно."
    "Также он очень ответственный и серьезно относится к учебе, за это я его и уважаю."
    "Увлекшись созданием презентации для социологии, мы не заметили того, как уже настало обеденное время."
    "Мы проводили весело время в моем доме, мы обсуждали все на свете:"
    "от сюжета аниме с очень глубоким сюжетом, до того, как бы мы вели себя в других вселенных."
    "Видно, как Нагису измотало такое насыщенное времяпровождение и у него постепенно закрывались глаза. Кажется, он уже засыпает, смотря это аниме."
    "Нагиса заснул, облокачивая голову на мое плечо."
    "Что происходит? Он реально заснул? Что мне делать?"
    menu:
        "Убрать его голову" :
            jump choices1_a
        "Ничего не делать" :
            jump choices1_b
label choices1_a:
    show nagisa
    "Он проснулся, по его лицу было видно, что его что-то расстроило."
    "-Ха… Я думаю мне пора. Автобусы скоро перестанут ехать. Спасибо за проведенное время."
    "-Хорошо, удачи Нагиса."
    hide nagisa with dissolve
    "Атмосфера заметно изменилась. Повлияло ли на это то, что я разбудил его таким образом."
    "Почему же он расстроился? Неужели он хотел проверить мою реакцию?"
    "Но почему же он ведет себя так? Своими действиями и поведением, он очень отличается от других."
    "Будто бы, он очень мягок и нежен для парня."
    jump second_part
label choices1_b:
    "Нагиса продолжал дремать, с головой, облокоченной на мое плечо."
    "Почему то, я решил не будить его. Но почему же он так привязался ко мне?"
    "Своими действиями и поведением, он очень отличается от других."
    "Будто бы, он очень мягок и нежен для парня."
    "Через полчаса, Нагиса в ужасе просыпается."
    show nagisa blushing
    e "-АААА!"
    e "-Уже так поздно! А мне еще надо добраться до общежития!!!"
    e "Он вскочил со своего места, и побежал к входной двери."
    e "-Спасибо за вечер… Было очень весело. До скорой встречи!!"
    "-До скорого. Уведоми меня, когда прибудешь."
    e "-Хорошо!!"
    hide nagisa with dissolve
    "Нагиса хлопнул дверь."
label second_part:
    "Это был насыщенный день."
    stop music
    play music "audio/vntrack19.mp3" fadein 1.0 volume 0.5
    scene bg cafe
    "Настал день экзаменов. После экзаменов мы пошли отметить в кафе, где играли в разные игры."
    "Нагиса тоже был каким-то молчаливым и отстраненным, и я решил спросить его."
    show nagisa with dissolve
    "- Что-то не так?"
    e "-Все нормально, ты чего?"
    "-Просто ты ведешь себя как-то странно в последнее время."
    show nagisa happy
    e "-Да? Я думаю, что тебе просто показалось, давай повеселимся!"
    "- Ну… хорошо."
    hide nagisa happy with dissolve
    "По его поведению и вправду было похоже, что что-то не так."
    "Он вел себя так, будто скрывает какую-то истину."
    "Я постараюсь убрать это из моей головы, думаю, я просто преувеличиваю."
    "Мы вместе начали играть в приставку, и веселились как обычно."
    "Вдруг Нагиса замолкает, и оборачивается на меня."
    show nagisa with dissolve
    e "-[player_name], давай поговорим наедине?"
    "Мне вдруг стало очень страшно, и появилась тревога, от того, о чем мы можем говорить."
    "Связано ли это с тем, почему он себя так странно вел в последнюю неделю?"
    "-С чего так внезапно? Не пугай меня так."
    show nagisa curious
    e "-Извини, но это правда важно. По крайней мере для меня."
    "-Хорошо…"
    hide nagisa curious with dissolve
    "У меня плохое предчувствие…"
    "Мы встали со своих мест, и покинули своих одногруппников."
    "Нагиса пошел вперед, и будто бы ждал пока я за ним последую."
    "Мы вместе вышли в коридор, где не было никого."
    show nagisa blushing with dissolve
    e "-[player_name], мы очень давно знакомы, и я давно хотел тебе сказать одну вещь, но мне никак не хватало смелости."
    "Кажется я уже догадываюсь о чем он хочет мне сказать, но я не хочу это принимать…"
    show nagisa mad
    e "-Если ближе к сути… Ты мне нравишься, давай встречаться?"
    show nagisa blushing
    "-Я знаю как это звучит, и ты не раз давал мне понять, что это невозможно, но все же…"
    "-То, что между нами никак нельзя назвать просто дружбой, я хочу чего то большего."
    stop music
    show nagisa
    "-Так… Какой твой ответ?"
    menu:
        "…":
            jump silent
        "Отрицательный":
            jump no
        "Положительный":
            jump yes
label silent:
    show nagisa mad
    e "-НЕ МОЛЧИ, ИДИОТ!"
    e "-Я НЕ ХОЧУ ГАДАТЬ О ЧЕМ ТЫ ДУМАЕШЬ."
    e "-И ТЫ НЕ МОЖЕШЬ ПРОСТО ПРИТВОРЯТЬСЯ, БУДТО НИЧЕГО И НЕ БЫЛО."
    e "-ДЕЛАЙ ВЫБОР."
    menu:
        "…":
            jump silent2
        "Отрицательный":
            jump no
        "Положительный":
            jump yes
label yes:
    show nagisa blushing
    e "-...Правда?"
    e "-Мне не верится... Это и в правду наяву?"
    jump good_end
label no:
    show nagisa
    e "-...Хорошо."
    e "-Знаешь, тогда нам лучше не общаться."
    e "-Просто мне так легче... Я не могу вести себя как обычно с тем, к кому я имею чувства."
    jump bad_end
label silent2:
    show nagisa mad
    e "-Ты сейчас серьезно?"
    e "-Ты реально не можешь выбрать?"
    show nagisa blushing
    e "-Хах… Извини… Я какой-то сам не свой."
    e "-Я на тебя давлю своими вопросами…"
    e "-Но я просто должен узнать твой ответ, иначе я не смогу успокоиться."
    e "-Так ты дашь мне свой ответ?"
    "..."
    e "*вздох*"
    jump bad_end

label bad_end:
    show nagisa mad with dissolve
    "У Нагисы на лице появилась нездоровая улыбка."
    hide nagisa mad with dissolve
    "Он ушел. Просто ушел из этого места."
    "Ни сказав не слова, и оставив меня без объяснений происходящего, он вышел из здания."
    "Я задержался, пытаясь забыть то, что произошло."
    scene bg street
    play music "audio/Dark Things.mp3" fadein 1.0 volume 0.2
    "Через несколько часов я вышел из кафе, и уже шел домой."
    "Все это время меня преследовало плохое предчувствие."
    "Как вдруг я вижу сзади себя какой то силуэт."
    "У меня начинается паника. Неужели мои самые главные опасения оказались правдивыми?"
    "-Привет."
    show nagisa mad with dissolve
    "Это был Нагиса."
    "Я сразу отошел на несколько метров назад от него."
    "-Не пугай меня так! Что ты здесь делаешь?"
    e "-Я просто решил проведать тебя."
    "-Откуда ты узнал где именно я нахожусь?"
    e "-Не важно. Что главное, ты так и придумал свой ответ?"
    e "-Нет. НЕТ! Мой ответ нет!"
    e "-Почему ты не мог ответить раньше?"
    e "-Стоп, ты что, избегаешь меня?"
    "-Ты меня очень пугаешь Нагиса."
    e "Я... противен тебе?"
    "Стоп... Пожалуйста успокойся."
    "Продолжение следует..."
    stop music
    hide bg street with dissolve
    "Продолжение будет, ОБЯЗАТЕЛЬНО"
    "Автор будет продолжать работу."
    "А пока... до скорой встречи."
    return

label good_end:
    "Мы с Нагисой хорошо провели время."
    "Наверное... Все будет хорошо?"
    "Продолжение следует..."
    stop music
    hide bg cafe with dissolve
    "Продолжение будет, ОБЯЗАТЕЛЬНО"
    "Автор будет продолжать работу."
    "А пока... до скорой встречи."
    return